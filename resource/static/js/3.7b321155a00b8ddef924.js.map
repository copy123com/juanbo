{"version":3,"sources":["webpack:///src/pages/PutQuestionsTo/PutQuestionsTo.vue","webpack:///./src/pages/PutQuestionsTo/PutQuestionsTo.vue?21bd","webpack:///./src/pages/PutQuestionsTo/PutQuestionsTo.vue"],"names":["PutQuestionsTo","data","form","content","title","img","previewVisible","previewImage","fileList","methods","onSubmit","_this2","this","_this","forEach","file","originFileObj","uid","localStorage","getItem","token","forms","formData","FormData","append","request","axios_default","a","create","baseURL","interceptors","use","config","headers","Content-Type","error","promise_default","reject","$message","loading","then","url","method","res","console","log","status","success","$router","push","catch","err","uploading","info","handleCancel","handlePreview","_this3","asyncToGenerator_default","regenerator_default","mark","_callee","wrap","_context","prev","next","preview","getBase64","sent","stop","handleChange","_ref","beforeUpload","concat","toConsumableArray_default","back","PutQuestionsTo_PutQuestionsTo","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","type","on","click","_v","model","placeholder","value","callback","$$v","$set","expression","visible","footer","cancel","staticStyle","width","alt","src","listType","change","length","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/3.7b321155a00b8ddef924.js","sourcesContent":["<template>\r\n<div>\r\n <header class=\"header\">\r\n   <a-icon type=\"left\" class=\"iLeft\" @click=\"back\" />\r\n    <h3 class=\"tab\">我要提问</h3>\r\n </header>\r\n   <a-form-model :model=\"form\">\r\n     <a-form-model-item>\r\n      <a-input v-model=\"form.title\" class=\"title\" type=\"text\" placeholder=\"请输入标题\" />\r\n    </a-form-model-item>\r\n   <a-form-model-item>\r\n      <a-input v-model=\"form.content\" type=\"textarea\" placeholder=\"发表问题...\" />\r\n    </a-form-model-item>\r\n    <a-modal :visible=\"previewVisible\" :footer=\"null\" @cancel=\"handleCancel\">\r\n      <img alt=\"example\" style=\"width: 100%\" :src=\"previewImage\" />\r\n    </a-modal>\r\n   <a-upload\r\n      :beforeUpload=\"beforeUpload\"\r\n      listType=\"picture-card\"\r\n      :fileList=\"fileList\"\r\n      @preview=\"handlePreview\"\r\n      @change=\"handleChange\"\r\n    >\r\n      <div v-if=\"fileList.length < 8\" >\r\n        <a-icon type=\"plus\" />\r\n        <div class=\"ant-upload-text\">Upload</div>\r\n      </div>\r\n    </a-upload>\r\n    <a-form-model-item class=\"button\">\r\n      <a-button @click=\"onSubmit\">\r\n      发表\r\n    </a-button>\r\n    </a-form-model-item>\r\n  </a-form-model>\r\n</div>\r\n</template>\r\n\r\n<script>\r\nimport store from '../../store';\r\nimport axios from 'axios'\r\nexport default {\r\n  \r\ndata() {\r\n    return {\r\n      form: {\r\n        content:'',\r\n        title:'',\r\n        img:''\r\n      },\r\n      previewVisible: false,\r\n      previewImage: '',\r\n      fileList: [],\r\n    };\r\n  },\r\n  methods: {\r\n    //提交问题\r\n    onSubmit() {\r\n        let _this = this;\r\n        _this.fileList.forEach((file)=>{\r\n          //获取图片数据\r\n          _this.form.img = file.originFileObj;\r\n      });\r\n      //对提交的信息进行判断\r\n      if(this.form.title === ''){\r\n         this.$message.info('标题不能为空');\r\n         return;\r\n      }else if(this.form.content === ''){\r\n         this.$message.info('内容不能为空');\r\n          return;\r\n      }\r\n      this.form.uid = localStorage.getItem('uid');\r\n     let token = localStorage.getItem('token');\r\n   \r\n     let forms = _this.form;\r\n     const formData = new FormData();\r\n   formData.append('img',forms.img);\r\n   formData.append('content',forms.content);\r\n   formData.append('title',forms.title);\r\n   formData.append('img',forms.img);\r\n   formData.append('uid',forms.uid);\r\n   const request = axios.create({\r\n     baseURL:'https://test.zhihao1.cn/api'\r\n   })\r\n   request.interceptors.request.use(function (config) {\r\n     config.headers = {\r\n       'token':token,\r\n       'Content-Type': 'multipart/form-data',\r\n     }\r\n     return config;\r\n   },function(error){\r\n     return Promise.reject(error)\r\n   })\r\n   this.$message.loading('正在提交',2).then(()=>{\r\n      request({\r\n      url:\"/content/add\",\r\n      method:'post',\r\n      data:formData\r\n    }).then(res=>{\r\n      console.log('2')\r\n      if(res.status == 200){\r\n        this.$message.success('提交成功');\r\n        this.$router.push('/home');\r\n        console.log(res)\r\n      }\r\n    }).catch(err=>{\r\n      console.log(err)\r\n    })\r\n   })\r\n    \r\n      this.uploading = true;\r\n    },\r\n\r\n\r\n    handleCancel() {\r\n      this.previewVisible = false;\r\n    },\r\n    async handlePreview(file) {\r\n      if (!file.url && !file.preview) {\r\n        file.preview = await getBase64(file.originFileObj);\r\n      }\r\n      this.previewImage = file.url || file.preview;\r\n      this.previewVisible = true;\r\n    },\r\n    \r\n    handleChange({ fileList }) {\r\n      this.fileList = fileList;\r\n    },\r\n\r\n    beforeUpload(file){\r\n      this.fileList = [...this.fileList, file];\r\n      return false;\r\n    },\r\n    back(){\r\n      this.$router.back();\r\n    }\r\n  },\r\n \r\n}\r\n</script>\r\n\r\n<style lang=\"stylus\" scoped>\r\n.header{\r\n  display flex\r\n  background-color rgb(92, 128, 202)\r\n  align-items center\r\n  height 2.346667rem\r\n  .tab{\r\n  background-color rgb(92, 128, 202)\r\n  text-align center\r\n  color #fff\r\n  line-height 2.346667rem\r\n  flex 1\r\n  padding-right 17px\r\n  }\r\n  .iLeft{\r\n    color #fff\r\n    font-size 16px\r\n    margin-left .266667rem\r\n  }\r\n}\r\n\r\n.ant-form{\r\n  width 100%\r\n  height 100%\r\n.ant-input{\r\n  margin 0\r\n  padding 0\r\n  width 100%\r\n  height 250px\r\n  border none\r\n  outline none\r\n  border 1px solid #ccc\r\n}\r\n.ant-upload-picture-card-wrapper{\r\n  position absolute\r\n  bottom 0\r\n  right 0\r\n  \r\n}\r\n.button{\r\n position absolute\r\n top 0\r\n right 0\r\n background-color none\r\n}\r\n.title{\r\n  height 2.833333rem\r\n  margin-top .533333rem\r\n}\r\n}\r\n</style>>\r\n\r\n\n\n\n// WEBPACK FOOTER //\n// src/pages/PutQuestionsTo/PutQuestionsTo.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('header',{staticClass:\"header\"},[_c('a-icon',{staticClass:\"iLeft\",attrs:{\"type\":\"left\"},on:{\"click\":_vm.back}}),_vm._v(\" \"),_c('h3',{staticClass:\"tab\"},[_vm._v(\"我要提问\")])],1),_vm._v(\" \"),_c('a-form-model',{attrs:{\"model\":_vm.form}},[_c('a-form-model-item',[_c('a-input',{staticClass:\"title\",attrs:{\"type\":\"text\",\"placeholder\":\"请输入标题\"},model:{value:(_vm.form.title),callback:function ($$v) {_vm.$set(_vm.form, \"title\", $$v)},expression:\"form.title\"}})],1),_vm._v(\" \"),_c('a-form-model-item',[_c('a-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"发表问题...\"},model:{value:(_vm.form.content),callback:function ($$v) {_vm.$set(_vm.form, \"content\", $$v)},expression:\"form.content\"}})],1),_vm._v(\" \"),_c('a-modal',{attrs:{\"visible\":_vm.previewVisible,\"footer\":null},on:{\"cancel\":_vm.handleCancel}},[_c('img',{staticStyle:{\"width\":\"100%\"},attrs:{\"alt\":\"example\",\"src\":_vm.previewImage}})]),_vm._v(\" \"),_c('a-upload',{attrs:{\"beforeUpload\":_vm.beforeUpload,\"listType\":\"picture-card\",\"fileList\":_vm.fileList},on:{\"preview\":_vm.handlePreview,\"change\":_vm.handleChange}},[(_vm.fileList.length < 8)?_c('div',[_c('a-icon',{attrs:{\"type\":\"plus\"}}),_vm._v(\" \"),_c('div',{staticClass:\"ant-upload-text\"},[_vm._v(\"Upload\")])],1):_vm._e()]),_vm._v(\" \"),_c('a-form-model-item',{staticClass:\"button\"},[_c('a-button',{on:{\"click\":_vm.onSubmit}},[_vm._v(\"\\r\\n      发表\\r\\n    \")])],1)],1)],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-592fc191\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/PutQuestionsTo/PutQuestionsTo.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-592fc191\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!stylus-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./PutQuestionsTo.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./PutQuestionsTo.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./PutQuestionsTo.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-592fc191\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./PutQuestionsTo.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-592fc191\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/PutQuestionsTo/PutQuestionsTo.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}